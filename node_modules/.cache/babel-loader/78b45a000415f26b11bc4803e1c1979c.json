{"ast":null,"code":"import LocalStorageService from \"./localStorageService\";\nimport jwt from 'jsonwebtoken';\nexport const USUARIO_LOGADO = '_usuario_logado';\nexport const TOKEN = 'access_token';\nexport default class AuthService {\n  static isUsuarioAutenticado() {\n    //const usuario = LocalStorageService.obterItem(USUARIO_LOGADO);\n    const token = LocalStorageService.obterItem(TOKEN); //const decodedToken = jwt.decode(token);\n    //const expiration = decodedToken.exp\n\n    var expiration = 1000;\n\n    if (token) {\n      console.log('token: ', token);\n      expiration = jwt.decode(token).exp;\n    }\n\n    const isTokenValido = Date.now() >= expiration * 1000; //return usuario && usuario.id;\n\n    return !isTokenValido;\n  }\n\n  static removerUsuarioAutenticado() {\n    LocalStorageService.removerItem(USUARIO_LOGADO);\n    LocalStorageService.removerItem(TOKEN);\n  }\n\n  static logar(usuario, token) {\n    console.log('logar');\n    LocalStorageService.adicionarItem(USUARIO_LOGADO, usuario);\n    LocalStorageService.adicionarItem(TOKEN, token);\n  }\n\n  static obterUsuarioLogado() {\n    return LocalStorageService.obterItem(USUARIO_LOGADO);\n  }\n\n  static refreshSession() {\n    console.log('refreshSession');\n    const token = LocalStorageService.obterItem(TOKEN);\n    const usuario = AuthService.obterUsuarioLogado();\n    AuthService.logar(usuario, token);\n    return usuario;\n  }\n\n}","map":{"version":3,"sources":["/home/clepson/Documentos/minhas-financas-app/src/app/service/authService.js"],"names":["LocalStorageService","jwt","USUARIO_LOGADO","TOKEN","AuthService","isUsuarioAutenticado","token","obterItem","expiration","console","log","decode","exp","isTokenValido","Date","now","removerUsuarioAutenticado","removerItem","logar","usuario","adicionarItem","obterUsuarioLogado","refreshSession"],"mappings":"AAAA,OAAOA,mBAAP,MAAgC,uBAAhC;AAEA,OAAOC,GAAP,MAAgB,cAAhB;AAEA,OAAO,MAAMC,cAAc,GAAG,iBAAvB;AACP,OAAO,MAAMC,KAAK,GAAG,cAAd;AAEP,eAAe,MAAMC,WAAN,CAAkB;AAEF,SAApBC,oBAAoB,GAAE;AACzB;AACA,UAAMC,KAAK,GAAGN,mBAAmB,CAACO,SAApB,CAA8BJ,KAA9B,CAAd,CAFyB,CAGzB;AACA;;AACA,QAAIK,UAAU,GAAG,IAAjB;;AACA,QAAGF,KAAH,EAAS;AACLG,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBJ,KAAvB;AACAE,MAAAA,UAAU,GAAGP,GAAG,CAACU,MAAJ,CAAWL,KAAX,EAAkBM,GAA/B;AACH;;AACD,UAAMC,aAAa,GAAGC,IAAI,CAACC,GAAL,MAAeP,UAAU,GAAG,IAAlD,CAVyB,CAYzB;;AACA,WAAO,CAACK,aAAR;AACH;;AAE+B,SAAzBG,yBAAyB,GAAE;AAC9BhB,IAAAA,mBAAmB,CAACiB,WAApB,CAAgCf,cAAhC;AACAF,IAAAA,mBAAmB,CAACiB,WAApB,CAAgCd,KAAhC;AACH;;AAEW,SAALe,KAAK,CAACC,OAAD,EAAUb,KAAV,EAAgB;AACxBG,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACAV,IAAAA,mBAAmB,CAACoB,aAApB,CAAkClB,cAAlC,EAAkDiB,OAAlD;AACAnB,IAAAA,mBAAmB,CAACoB,aAApB,CAAkCjB,KAAlC,EAAyCG,KAAzC;AACH;;AAEwB,SAAlBe,kBAAkB,GAAE;AACvB,WAAOrB,mBAAmB,CAACO,SAApB,CAA8BL,cAA9B,CAAP;AACH;;AAEoB,SAAdoB,cAAc,GAAE;AACnBb,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACA,UAAMJ,KAAK,GAAGN,mBAAmB,CAACO,SAApB,CAA8BJ,KAA9B,CAAd;AACA,UAAMgB,OAAO,GAAGf,WAAW,CAACiB,kBAAZ,EAAhB;AACAjB,IAAAA,WAAW,CAACc,KAAZ,CAAkBC,OAAlB,EAA2Bb,KAA3B;AAEA,WAAOa,OAAP;AACH;;AAxC4B","sourcesContent":["import LocalStorageService from \"./localStorageService\";\n\nimport jwt from 'jsonwebtoken'\n\nexport const USUARIO_LOGADO = '_usuario_logado';\nexport const TOKEN = 'access_token';\n\nexport default class AuthService {\n\n    static isUsuarioAutenticado(){\n        //const usuario = LocalStorageService.obterItem(USUARIO_LOGADO);\n        const token = LocalStorageService.obterItem(TOKEN);\n        //const decodedToken = jwt.decode(token);\n        //const expiration = decodedToken.exp\n        var expiration = 1000;\n        if(token){\n            console.log('token: ', token);\n            expiration = jwt.decode(token).exp;\n        }\n        const isTokenValido = Date.now() >= (expiration * 1000);\n        \n        //return usuario && usuario.id;\n        return !isTokenValido;\n    }\n\n    static removerUsuarioAutenticado(){\n        LocalStorageService.removerItem(USUARIO_LOGADO);\n        LocalStorageService.removerItem(TOKEN);\n    }\n\n    static logar(usuario, token){\n        console.log('logar');\n        LocalStorageService.adicionarItem(USUARIO_LOGADO, usuario);\n        LocalStorageService.adicionarItem(TOKEN, token);\n    }\n\n    static obterUsuarioLogado(){\n        return LocalStorageService.obterItem(USUARIO_LOGADO);\n    }\n\n    static refreshSession(){\n        console.log('refreshSession');\n        const token = LocalStorageService.obterItem(TOKEN);\n        const usuario = AuthService.obterUsuarioLogado();\n        AuthService.logar(usuario, token);\n\n        return usuario;\n    }\n\n}"]},"metadata":{},"sourceType":"module"}