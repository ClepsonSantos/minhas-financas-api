{"ast":null,"code":"var _jsxFileName = \"/home/clepson/Documentos/minhas-financas-app/src/views/lacamentos/cadastro-lancamentos.js\";\nimport React from \"react\";\nimport Card from '../../components/card';\nimport FormGroup from '../../components/form-group';\nimport SelectMenu from \"../../components/selectMenu\";\nimport { withRouter } from 'react-router-dom';\nimport * as messages from '../../components/toastr';\nimport LancamentoService from \"../../app/service/lancamentoService\";\nimport LocalStorageService from \"../../app/service/localStorageService\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass CadastroLancamentos extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      id: null,\n      descricao: '',\n      valor: '',\n      mes: '',\n      ano: '',\n      tipo: '',\n      status: '',\n      usuario: null,\n      atualizando: false\n    };\n\n    this.handleChange = event => {\n      const value = event.target.value;\n      const name = event.target.name;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.submit = () => {\n      const usuarioLogado = LocalStorageService.obterItem('_usuario_logado');\n      const {\n        descricao,\n        valor,\n        mes,\n        ano,\n        tipo\n      } = this.state;\n      const lancamento = {\n        descricao,\n        valor,\n        mes,\n        ano,\n        tipo,\n        usuario: usuarioLogado.id\n      };\n\n      try {\n        this.service.validar(lancamento);\n      } catch (erro) {\n        const mensagens = erro.mensagens;\n        mensagens.forEach(msg => messages.mensagemErro(msg));\n        return false;\n      }\n\n      this.service.salvar(lancamento).then(response => {\n        this.props.history.push('/consulta-lancamentos'); // redireciona para página de consulta lançamento\n\n        messages.mensagemSucesso('Lançamento cadastrado com sucesso!');\n      }).catch(error => {\n        messages.mensagemErro(error.response.data);\n      });\n    };\n\n    this.atualizar = () => {\n      const {\n        descricao,\n        valor,\n        mes,\n        ano,\n        tipo,\n        id,\n        usuario\n      } = this.state;\n      const lancamento = {\n        descricao,\n        valor,\n        mes,\n        ano,\n        tipo,\n        id,\n        usuario\n      };\n      this.service.salvar(lancamento).then(response => {\n        this.props.history.push('/consulta-lancamentos'); // redireciona para página de consulta lançamento\n\n        messages.mensagemSucesso('Lançamento atualizado com sucesso!');\n      }).catch(error => {\n        messages.mensagemErro(error.response.data);\n      });\n    };\n\n    this.service = new LancamentoService();\n  } // esse método é chamado após o método render()\n\n\n  componentDidMount() {\n    const params = this.props.match.params;\n\n    if (params.id) {\n      this.service.obterPorId(params.id).then(response => {\n        this.setState({ ...response.data,\n          atualizando: true\n        });\n      }).catch(error => {\n        messages.mensagemErro(error.response.data);\n      });\n    }\n  }\n\n  render() {\n    const tipos = this.service.obterListaTipos();\n    const meses = this.service.obterListaMeses();\n    return /*#__PURE__*/_jsxDEV(Card, {\n      title: this.state.atualizando ? 'Atualização de Lançamento' : 'Cadastro de Lançamento',\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-12\",\n          children: /*#__PURE__*/_jsxDEV(FormGroup, {\n            id: \"inputDescricao\",\n            label: \"Descri\\xE7\\xE3o: *\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"inputDescricao\",\n              type: \"text\",\n              className: \"form-control\",\n              name: \"descricao\",\n              value: this.state.descricao,\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6\",\n          children: /*#__PURE__*/_jsxDEV(FormGroup, {\n            id: \"inputAno\",\n            label: \"Ano: *\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"inputAno\",\n              type: \"text\",\n              className: \"form-control\",\n              name: \"ano\",\n              value: this.state.ano,\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6\",\n          children: /*#__PURE__*/_jsxDEV(FormGroup, {\n            id: \"inputMes\",\n            label: \"M\\xEAs: *\",\n            children: /*#__PURE__*/_jsxDEV(SelectMenu, {\n              id: \"inputMes\",\n              lista: meses,\n              className: \"form-control\",\n              name: \"mes\",\n              value: this.state.mes,\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-4\",\n          children: /*#__PURE__*/_jsxDEV(FormGroup, {\n            id: \"inputValor\",\n            label: \"Valor: *\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"inputValor\",\n              type: \"text\",\n              className: \"form-control\",\n              name: \"valor\",\n              value: this.state.valor,\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-4\",\n          children: /*#__PURE__*/_jsxDEV(FormGroup, {\n            id: \"inputTipo\",\n            label: \"Tipo: *\",\n            children: /*#__PURE__*/_jsxDEV(SelectMenu, {\n              id: \"inputTipo\",\n              lista: tipos,\n              className: \"form-control\",\n              name: \"tipo\",\n              value: this.state.tipo,\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-4\",\n          children: /*#__PURE__*/_jsxDEV(FormGroup, {\n            id: \"inputStatus\",\n            label: \"Status: *\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"status\",\n              value: this.state.status,\n              onChange: this.handleChange,\n              className: \"form-control\",\n              disabled: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6\",\n          children: [this.state.atualizando ? /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: this.atualizar,\n            className: \"btn btn-primary\",\n            children: \"Editar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 33\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: this.submit,\n            className: \"btn btn-success\",\n            children: \"Salvar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: e => this.props.history.push('/consulta-lancamentos'),\n            className: \"btn btn-danger\",\n            children: \"Cancelar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default _c = withRouter(CadastroLancamentos);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/home/clepson/Documentos/minhas-financas-app/src/views/lacamentos/cadastro-lancamentos.js"],"names":["React","Card","FormGroup","SelectMenu","withRouter","messages","LancamentoService","LocalStorageService","CadastroLancamentos","Component","constructor","state","id","descricao","valor","mes","ano","tipo","status","usuario","atualizando","handleChange","event","value","target","name","setState","submit","usuarioLogado","obterItem","lancamento","service","validar","erro","mensagens","forEach","msg","mensagemErro","salvar","then","response","props","history","push","mensagemSucesso","catch","error","data","atualizar","componentDidMount","params","match","obterPorId","render","tipos","obterListaTipos","meses","obterListaMeses","e"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAOC,IAAP,MAAiB,uBAAjB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,UAAP,MAAuB,6BAAvB;AAEA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAO,KAAKC,QAAZ,MAA0B,yBAA1B;AAEA,OAAOC,iBAAP,MAA8B,qCAA9B;AACA,OAAOC,mBAAP,MAAgC,uCAAhC;;;AAEA,MAAMC,mBAAN,SAAkCR,KAAK,CAACS,SAAxC,CAAkD;AAc9CC,EAAAA,WAAW,GAAE;AACT;AADS,SAZbC,KAYa,GAZL;AACJC,MAAAA,EAAE,EAAE,IADA;AAEJC,MAAAA,SAAS,EAAE,EAFP;AAGJC,MAAAA,KAAK,EAAE,EAHH;AAIJC,MAAAA,GAAG,EAAE,EAJD;AAKJC,MAAAA,GAAG,EAAE,EALD;AAMJC,MAAAA,IAAI,EAAE,EANF;AAOJC,MAAAA,MAAM,EAAE,EAPJ;AAQJC,MAAAA,OAAO,EAAE,IARL;AASJC,MAAAA,WAAW,EAAE;AATT,KAYK;;AAAA,SAqBbC,YArBa,GAqBGC,KAAD,IAAW;AACtB,YAAMC,KAAK,GAAGD,KAAK,CAACE,MAAN,CAAaD,KAA3B;AACA,YAAME,IAAI,GAAGH,KAAK,CAACE,MAAN,CAAaC,IAA1B;AAEA,WAAKC,QAAL,CAAc;AAAE,SAACD,IAAD,GAASF;AAAX,OAAd;AACH,KA1BY;;AAAA,SA4BbI,MA5Ba,GA4BJ,MAAM;AACX,YAAMC,aAAa,GAAGrB,mBAAmB,CAACsB,SAApB,CAA8B,iBAA9B,CAAtB;AAEA,YAAO;AAAEhB,QAAAA,SAAF;AAAaC,QAAAA,KAAb;AAAoBC,QAAAA,GAApB;AAAyBC,QAAAA,GAAzB;AAA8BC,QAAAA;AAA9B,UAAuC,KAAKN,KAAnD;AACA,YAAMmB,UAAU,GAAG;AAAEjB,QAAAA,SAAF;AAAaC,QAAAA,KAAb;AAAoBC,QAAAA,GAApB;AAAyBC,QAAAA,GAAzB;AAA8BC,QAAAA,IAA9B;AAAoCE,QAAAA,OAAO,EAAES,aAAa,CAAChB;AAA3D,OAAnB;;AAEA,UAAI;AACA,aAAKmB,OAAL,CAAaC,OAAb,CAAqBF,UAArB;AACH,OAFD,CAEE,OAAOG,IAAP,EAAa;AACX,cAAMC,SAAS,GAAGD,IAAI,CAACC,SAAvB;AACAA,QAAAA,SAAS,CAACC,OAAV,CAAkBC,GAAG,IAAI/B,QAAQ,CAACgC,YAAT,CAAsBD,GAAtB,CAAzB;AACA,eAAO,KAAP;AACH;;AAED,WAAKL,OAAL,CACKO,MADL,CACYR,UADZ,EAEKS,IAFL,CAEUC,QAAQ,IAAI;AACd,aAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,uBAAxB,EADc,CACoC;;AAElDtC,QAAAA,QAAQ,CAACuC,eAAT,CAAyB,oCAAzB;AACH,OANL,EAMOC,KANP,CAMaC,KAAK,IAAI;AACdzC,QAAAA,QAAQ,CAACgC,YAAT,CAAsBS,KAAK,CAACN,QAAN,CAAeO,IAArC;AACH,OARL;AASH,KAnDY;;AAAA,SAqDbC,SArDa,GAqDD,MAAM;AACd,YAAO;AAAEnC,QAAAA,SAAF;AAAaC,QAAAA,KAAb;AAAoBC,QAAAA,GAApB;AAAyBC,QAAAA,GAAzB;AAA8BC,QAAAA,IAA9B;AAAoCL,QAAAA,EAApC;AAAwCO,QAAAA;AAAxC,UAAoD,KAAKR,KAAhE;AACA,YAAMmB,UAAU,GAAG;AAAEjB,QAAAA,SAAF;AAAaC,QAAAA,KAAb;AAAoBC,QAAAA,GAApB;AAAyBC,QAAAA,GAAzB;AAA8BC,QAAAA,IAA9B;AAAoCL,QAAAA,EAApC;AAAwCO,QAAAA;AAAxC,OAAnB;AAEA,WAAKY,OAAL,CACKO,MADL,CACYR,UADZ,EAEKS,IAFL,CAEUC,QAAQ,IAAI;AACd,aAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,uBAAxB,EADc,CACoC;;AAElDtC,QAAAA,QAAQ,CAACuC,eAAT,CAAyB,oCAAzB;AACH,OANL,EAMOC,KANP,CAMaC,KAAK,IAAI;AACdzC,QAAAA,QAAQ,CAACgC,YAAT,CAAsBS,KAAK,CAACN,QAAN,CAAeO,IAArC;AACH,OARL;AASH,KAlEY;;AAET,SAAKhB,OAAL,GAAe,IAAIzB,iBAAJ,EAAf;AACH,GAjB6C,CAmB9C;;;AACA2C,EAAAA,iBAAiB,GAAE;AACf,UAAMC,MAAM,GAAG,KAAKT,KAAL,CAAWU,KAAX,CAAiBD,MAAhC;;AAEA,QAAGA,MAAM,CAACtC,EAAV,EAAa;AACT,WAAKmB,OAAL,CACKqB,UADL,CACgBF,MAAM,CAACtC,EADvB,EAEK2B,IAFL,CAEUC,QAAQ,IAAI;AACd,aAAKd,QAAL,CAAe,EAAC,GAAGc,QAAQ,CAACO,IAAb;AAAmB3B,UAAAA,WAAW,EAAE;AAAhC,SAAf;AACH,OAJL,EAKKyB,KALL,CAKWC,KAAK,IAAI;AACZzC,QAAAA,QAAQ,CAACgC,YAAT,CAAsBS,KAAK,CAACN,QAAN,CAAeO,IAArC;AACH,OAPL;AAQH;AACJ;;AAiDDM,EAAAA,MAAM,GAAE;AAEJ,UAAMC,KAAK,GAAG,KAAKvB,OAAL,CAAawB,eAAb,EAAd;AACA,UAAMC,KAAK,GAAG,KAAKzB,OAAL,CAAa0B,eAAb,EAAd;AAEA,wBACI,QAAC,IAAD;AAAM,MAAA,KAAK,EAAG,KAAK9C,KAAL,CAAWS,WAAX,GAAyB,2BAAzB,GAAuD,wBAArE;AAAA,8BACI;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA,+BACI;AAAK,UAAA,SAAS,EAAC,WAAf;AAAA,iCACI,QAAC,SAAD;AAAW,YAAA,EAAE,EAAC,gBAAd;AAA+B,YAAA,KAAK,EAAC,oBAArC;AAAA,mCACI;AAAO,cAAA,EAAE,EAAC,gBAAV;AACO,cAAA,IAAI,EAAC,MADZ;AAEO,cAAA,SAAS,EAAC,cAFjB;AAGO,cAAA,IAAI,EAAC,WAHZ;AAIO,cAAA,KAAK,EAAE,KAAKT,KAAL,CAAWE,SAJzB;AAKO,cAAA,QAAQ,EAAE,KAAKQ;AALtB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cADJ,eAcI;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA,gCACI;AAAK,UAAA,SAAS,EAAC,UAAf;AAAA,iCACI,QAAC,SAAD;AAAW,YAAA,EAAE,EAAC,UAAd;AAAyB,YAAA,KAAK,EAAC,QAA/B;AAAA,mCACI;AAAO,cAAA,EAAE,EAAC,UAAV;AAAqB,cAAA,IAAI,EAAC,MAA1B;AACO,cAAA,SAAS,EAAC,cADjB;AAEO,cAAA,IAAI,EAAC,KAFZ;AAGO,cAAA,KAAK,EAAE,KAAKV,KAAL,CAAWK,GAHzB;AAIO,cAAA,QAAQ,EAAE,KAAKK;AAJtB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBADJ,eAUI;AAAK,UAAA,SAAS,EAAC,UAAf;AAAA,iCACI,QAAC,SAAD;AAAW,YAAA,EAAE,EAAC,UAAd;AAAyB,YAAA,KAAK,EAAC,WAA/B;AAAA,mCACI,QAAC,UAAD;AAAY,cAAA,EAAE,EAAC,UAAf;AACY,cAAA,KAAK,EAAEmC,KADnB;AAEY,cAAA,SAAS,EAAC,cAFtB;AAGY,cAAA,IAAI,EAAC,KAHjB;AAIY,cAAA,KAAK,EAAE,KAAK7C,KAAL,CAAWI,GAJ9B;AAKY,cAAA,QAAQ,EAAE,KAAKM;AAL3B;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBAVJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAdJ,eAoCI;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA,gCACI;AAAK,UAAA,SAAS,EAAC,UAAf;AAAA,iCACI,QAAC,SAAD;AAAW,YAAA,EAAE,EAAC,YAAd;AAA2B,YAAA,KAAK,EAAC,UAAjC;AAAA,mCACI;AAAO,cAAA,EAAE,EAAC,YAAV;AACO,cAAA,IAAI,EAAC,MADZ;AAEO,cAAA,SAAS,EAAC,cAFjB;AAGO,cAAA,IAAI,EAAC,OAHZ;AAIO,cAAA,KAAK,EAAE,KAAKV,KAAL,CAAWG,KAJzB;AAKO,cAAA,QAAQ,EAAE,KAAKO;AALtB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBADJ,eAWI;AAAK,UAAA,SAAS,EAAC,UAAf;AAAA,iCACI,QAAC,SAAD;AAAW,YAAA,EAAE,EAAC,WAAd;AAA0B,YAAA,KAAK,EAAC,SAAhC;AAAA,mCACI,QAAC,UAAD;AAAY,cAAA,EAAE,EAAC,WAAf;AACY,cAAA,KAAK,EAAEiC,KADnB;AAEY,cAAA,SAAS,EAAC,cAFtB;AAGY,cAAA,IAAI,EAAC,MAHjB;AAIY,cAAA,KAAK,EAAE,KAAK3C,KAAL,CAAWM,IAJ9B;AAKY,cAAA,QAAQ,EAAE,KAAKI;AAL3B;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBAXJ,eAqBI;AAAK,UAAA,SAAS,EAAC,UAAf;AAAA,iCACI,QAAC,SAAD;AAAW,YAAA,EAAE,EAAC,aAAd;AAA4B,YAAA,KAAK,EAAC,WAAlC;AAAA,mCACI;AAAO,cAAA,IAAI,EAAC,MAAZ;AACO,cAAA,IAAI,EAAC,QADZ;AAEO,cAAA,KAAK,EAAE,KAAKV,KAAL,CAAWO,MAFzB;AAGO,cAAA,QAAQ,EAAE,KAAKG,YAHtB;AAIO,cAAA,SAAS,EAAC,cAJjB;AAKO,cAAA,QAAQ;AALf;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBArBJ;AAAA;AAAA;AAAA;AAAA;AAAA,cApCJ,eAuEI;AAAA;AAAA;AAAA;AAAA,cAvEJ,eAyEI;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA,+BACI;AAAK,UAAA,SAAS,EAAC,UAAf;AAAA,qBACM,KAAKV,KAAL,CAAWS,WAAX,gBAEM;AAAQ,YAAA,OAAO,EAAE,KAAK4B,SAAtB;AAAiC,YAAA,SAAS,EAAC,iBAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFN,gBAIM;AAAQ,YAAA,OAAO,EAAE,KAAKrB,MAAtB;AAA8B,YAAA,SAAS,EAAC,iBAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBALZ,eAQI;AAAQ,YAAA,OAAO,EAAE+B,CAAC,IAAI,KAAKjB,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,uBAAxB,CAAtB;AAAwE,YAAA,SAAS,EAAC,gBAAlF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBARJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cAzEJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ;AAwFH;;AA/K6C;;AAkLlD,oBAAevC,UAAU,CAACI,mBAAD,CAAzB","sourcesContent":["import React from \"react\";\n\nimport Card from '../../components/card'\nimport FormGroup from '../../components/form-group'\nimport SelectMenu from \"../../components/selectMenu\";\n\nimport { withRouter } from 'react-router-dom'\nimport * as messages from '../../components/toastr';\n\nimport LancamentoService from \"../../app/service/lancamentoService\";\nimport LocalStorageService from \"../../app/service/localStorageService\";\n\nclass CadastroLancamentos extends React.Component {\n\n    state = {\n        id: null,\n        descricao: '',\n        valor: '',\n        mes: '',\n        ano: '',\n        tipo: '',\n        status: '',\n        usuario: null,\n        atualizando: false\n    }\n\n    constructor(){\n        super();\n        this.service = new LancamentoService();\n    }\n\n    // esse método é chamado após o método render()\n    componentDidMount(){\n        const params = this.props.match.params;\n        \n        if(params.id){\n            this.service\n                .obterPorId(params.id)\n                .then(response => {\n                    this.setState( {...response.data, atualizando: true} );\n                })\n                .catch(error => {\n                    messages.mensagemErro(error.response.data);\n                });\n        }\n    }\n\n    handleChange = (event) => {\n        const value = event.target.value;\n        const name = event.target.name;\n        \n        this.setState({ [name] : value });\n    }\n    \n    submit = () => {\n        const usuarioLogado = LocalStorageService.obterItem('_usuario_logado');\n\n        const  { descricao, valor, mes, ano, tipo } = this.state;\n        const lancamento = { descricao, valor, mes, ano, tipo, usuario: usuarioLogado.id }\n\n        try {\n            this.service.validar(lancamento);\n        } catch (erro) {\n            const mensagens = erro.mensagens;\n            mensagens.forEach(msg => messages.mensagemErro(msg));\n            return false;\n        }\n\n        this.service\n            .salvar(lancamento)\n            .then(response => {\n                this.props.history.push('/consulta-lancamentos'); // redireciona para página de consulta lançamento\n                \n                messages.mensagemSucesso('Lançamento cadastrado com sucesso!');\n            }).catch(error => {\n                messages.mensagemErro(error.response.data);\n            });\n    }\n\n    atualizar = () => {\n        const  { descricao, valor, mes, ano, tipo, id, usuario } = this.state;\n        const lancamento = { descricao, valor, mes, ano, tipo, id, usuario }\n\n        this.service\n            .salvar(lancamento)\n            .then(response => {\n                this.props.history.push('/consulta-lancamentos'); // redireciona para página de consulta lançamento\n                \n                messages.mensagemSucesso('Lançamento atualizado com sucesso!');\n            }).catch(error => {\n                messages.mensagemErro(error.response.data);\n            });\n    }\n\n    render(){\n\n        const tipos = this.service.obterListaTipos();\n        const meses = this.service.obterListaMeses();\n\n        return(\n            <Card title={ this.state.atualizando ? 'Atualização de Lançamento' : 'Cadastro de Lançamento' }>\n                <div className=\"row\">\n                    <div className=\"col-md-12\">\n                        <FormGroup id=\"inputDescricao\" label=\"Descrição: *\">\n                            <input id=\"inputDescricao\" \n                                   type=\"text\" \n                                   className=\"form-control\"\n                                   name=\"descricao\"\n                                   value={this.state.descricao}\n                                   onChange={this.handleChange} />\n                        </FormGroup>\n                    </div>\n                </div>\n\n                <div className=\"row\">\n                    <div className=\"col-md-6\">\n                        <FormGroup id=\"inputAno\" label=\"Ano: *\" >\n                            <input id=\"inputAno\" type=\"text\" \n                                   className=\"form-control\"\n                                   name=\"ano\"\n                                   value={this.state.ano}\n                                   onChange={this.handleChange} />\n                        </FormGroup>\n                    </div>\n                    <div className=\"col-md-6\">\n                        <FormGroup id=\"inputMes\" label=\"Mês: *\" >\n                            <SelectMenu id=\"inputMes\" \n                                        lista={meses} \n                                        className=\"form-control\"\n                                        name=\"mes\"\n                                        value={this.state.mes}\n                                        onChange={this.handleChange} />\n                        </FormGroup>\n                    </div>\n                </div>\n\n                <div className=\"row\">\n                    <div className=\"col-md-4\">\n                        <FormGroup id=\"inputValor\" label=\"Valor: *\" >\n                            <input id=\"inputValor\" \n                                   type=\"text\" \n                                   className=\"form-control\"\n                                   name=\"valor\"\n                                   value={this.state.valor}\n                                   onChange={this.handleChange} />\n                        </FormGroup>\n                    </div>\n                    <div className=\"col-md-4\">\n                        <FormGroup id=\"inputTipo\" label=\"Tipo: *\" >\n                            <SelectMenu id=\"inputTipo\" \n                                        lista={tipos} \n                                        className=\"form-control\"\n                                        name=\"tipo\"\n                                        value={this.state.tipo}\n                                        onChange={this.handleChange} />\n                        </FormGroup>\n                    </div>\n                    <div className=\"col-md-4\">\n                        <FormGroup id=\"inputStatus\" label=\"Status: *\" >\n                            <input type=\"text\" \n                                   name=\"status\"\n                                   value={this.state.status}\n                                   onChange={this.handleChange} \n                                   className=\"form-control\"\n                                   disabled />\n                        </FormGroup>\n                    </div>\n\n\n                </div>\n\n                <br />\n\n                <div className=\"row\">\n                    <div className=\"col-md-6\">\n                        { this.state.atualizando ?\n                            (\n                                <button onClick={this.atualizar} className=\"btn btn-primary\">Editar</button>\n                            ) : (\n                                <button onClick={this.submit} className=\"btn btn-success\">Salvar</button>\n                            )\n                        }\n                        <button onClick={e => this.props.history.push('/consulta-lancamentos')} className=\"btn btn-danger\">Cancelar</button>\n                    </div>\n                </div>\n            </Card>\n        );\n    }\n}\n\nexport default withRouter(CadastroLancamentos);"]},"metadata":{},"sourceType":"module"}